<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Invest101 Project_traineeinfo</title>

  <!-- Custom fonts for this theme -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
    type="text/css">

  <!-- Theme CSS -->
  <link href="css/freelancer.min.css" rel="stylesheet">
  <!--메터리얼 아이콘-->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <meta charset="utf-8">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>

  <!-- Template global css file. Requared all pages -->
	<link rel="stylesheet" type="text/css" href="css/global.style.css">

</head>

<body id="page-top">


  <!-- 로그인/회원가입 & 메인메뉴 상단바 Navigation -->
  <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <!--메인로고-->
    <div class="container" style="float: left; padding-right:0px; padding-left:0px; height:80px;  ">
      <div style="padding-left:0px;">
        <a class="navbar-br and js-scroll-trigger" href="main"><img src="/img/invest_logo (3).png" width="100px"
            height="100px" alt="invest101"></a>
        <button
          class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded"
          type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive"
          aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!--메인 메뉴-->
      <div class="collapse navbar-collapse" id="navbarResponsive"
        style="text-align: center; font-size:19px; padding-left:120px; padding-right:80px;">
        <ul class="navbar-nav">
          <li class="nav-item mx-0 mx-lg-1" style="padding-left:8px;">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="donaUse">후원활용</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1" style="padding-left:8px;">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="traineeList">연습생목록</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1" style="padding-left:5px;">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="donaStatus">후원금현황</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1" style="padding-left:8px;">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="myDona">나의 후원내역</a>
          </li>
        </ul>
      </div>

      <!--로그인/회원가입-->
      <div>
        <div>
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id='login' style="display:block"
                href="login">로그인</a>
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id="logout" style="display:none">로그아웃</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id='a' style="display:block">/</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" id='signup' style="display:block"
                href="signup">회원가입</a>
            </li>
          </ul>
        </div>
        <div>
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="login"></a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="signup"></a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <!-- 연습생 상세페이지 내용-->
  <br><br><br><br><br><br>
  <div class="footer text-center" style="background-color:rgb(255, 255, 255); overflow: hidden; height:auto;">
    <div class="container">
      <div class="col-lg-4 mb-5 mb-lg-0" style="display: flex; align-items: flex-start; margin-left: 150px;">
        <!-- 연습생 상세정보 -->
        
        <div style="float: left; margin-right: 50px; color: black; text-align:left; ">
          <div id="mainPhoto"></div><br>
          <div id="name"><span style="color: #57626d;">이름&nbsp;&nbsp;&nbsp;</span></div>
          <div id="birthday"><span style="color: #57626d;">출생&nbsp;&nbsp;&nbsp;</span></div>
          <div id="age"><span style="color: #57626d;">나이&nbsp;&nbsp;&nbsp;</span></div>
          <div id="idol"><span style="color: #57626d;">소속그룹&nbsp;&nbsp;&nbsp;</span></div>
          <div id="company"><span style="color: #57626d;">소속사&nbsp;&nbsp;&nbsp;</span></div>
          <div id="instagram"><span style="color: #57626d;">SNS&nbsp;&nbsp;&nbsp;</span></div><br>
          <div id="youtube"><span style="color: #57626d;">활동영상&nbsp;&nbsp;&nbsp;</span></div><br>
        </div>
        <br>

        <!-- 후원 -->
        <div style="float: left; color: black; text-align:left;">
          <input type="button" cladd="button" id="supportBtn" class="button circle block orange" 
            style="float: right; width: 120px; height: 50px; background-color: #1abc9c; color: white; margin-right:20px;"
            value="후원하기" />


        
            <br><br><br><br><br>
          <i class="material-icons"> favorite_border </i>
          <span id="support_people"><span style="color: darkgray;">후원인원&nbsp;&nbsp;&nbsp;</span></span><br>

          <i class="material-icons"> favorite_border </i>
          <span id="support_money"><span style="color: darkgray;">후원금액&nbsp;&nbsp;&nbsp;</span></span><br>
          <div id="donation_percent_1" style="margin: 20px; width: 400px; height: 8px; position: relative;"></div>
          <br>
          <div id="donation_percent_2" style="margin: 20px; width: 400px; height: 8px; position: relative;"></div>
          <br>
          <div id="donation_percent_3" style="margin: 20px; width: 400px; height: 8px; position: relative;"></div>
          <br><br><br> <br> <br>
        </div>
      </div>
    </div>
  </div>



  <!-- Footer -->
  <footer class="footer text-center">
    <div class="container">
      <div class="row">

        <!-- Footer Location -->
        <div class="col-lg-4 mb-5 mb-lg-0">
          <h4 class="text-uppercase mb-4">Location</h4>
          <p class="lead mb-0">서울 송파구 중대로 135</p>
        </div>

        <!-- Footer Social Icons -->
        <div class="col-lg-4 mb-5 mb-lg-0">
          <h4 class="text-uppercase mb-4">Around the Web</h4>
          <a class="btn btn-outline-light btn-social mx-1" href="#">
            <i class="fab fa-fw fa-facebook-f"></i>
          </a>
          <a class="btn btn-outline-light btn-social mx-1" href="#portfolio">
            <i class="fab fa-fw fa-twitter"></i>
          </a>

        </div>

        <!-- Footer About Text -->
        <div class="col-lg-4">
          <h4 class="text-uppercase mb-4">About Invest101</h4>
          <p class="lead mb-0">Invest101 is a free to use, this service created by fintech academy </p>
        </div>

      </div>
    </div>
  </footer>

  <!-- Copyright Section -->
  <section class="copyright py-4 text-center text-white">
    <div class="container">
      <small>Copyright &copy; Invest101 2020</small>
    </div>
  </section>

  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>


  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Contact Form JavaScript -->
  <script src="js/jqBootstrapValidation.js"></script>
  <script src="js/contact_me.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/freelancer.min.js"></script>
  <script src="js/progressbar.js"></script>

  <script>
    var getParameters = function (paramName) {
      var returnValue;
      var url = location.href;
      // get 파라미터 값을 가져올 수 있는 ? 를 기점으로 slice 한 후 split 으로 나눔
      var parameters = (url.slice(url.indexOf('?') + 1, url.length)).split('&');
      // 나누어진 값의 비교를 통해 paramName 으로 요청된 데이터의 값만 return
      for (var i = 0; i < parameters.length; i++) {
        var varName = parameters[i].split('=')[0];
        if (varName.toUpperCase() == paramName.toUpperCase()) {
          returnValue = parameters[i].split('=')[1];
          return decodeURIComponent(returnValue);
        }
      }
    };
    var traineeId = getParameters('id');



    //후원하기버튼
    $('#supportBtn').click(function () {
      window.location.replace("http://localhost:3000/donation?id=" + traineeId);
    })


    //메인프로필
    searchList()
    function searchList() {
      $.ajax({
        url: 'http://localhost:3000/trainee/' + traineeId + '/detail',
        type: 'get',
        success: function (data) {
          var percent_1 = 0, percent_2 = 0, percent_3 = 0;

          console.log("dfdsfsdfdsfsdf")
          $("#mainPhoto").append('<img src="' + data.photo1 + '" style="width:160px; height:200px;">');
          $("#support_money").append('<span>' + data.donation_sum.toLocaleString() + '</span>');
          $("#support_people").append(data.donation_num);
          $("#name").append(data.name);
          $("#birthday").append(data.birthday);
          $("#age").append(data.age);
          $("#company").append(data.company);
          $("#idol").append(data.group_idol);
          $("#youtube").append('<a href="' + data.youtube + '">' + '<img src="' + data.photo2 + '" style="width:250px; height:140px;"></a>' + '<br>' + data.title);
          $("#instagram").append('<a href="' + data.sns + '"><img src="/img/instagram.png" style="width:100px; height:25px;" alt="인스타그램"></a>');

          if (data.donation_sum <= 2000000) {
            percent_1 = data.donation_sum / 2000000;
          }
          else if (data.donation_sum <= 4000000) {
            percent_1 = 1;
            percent_2 = data.donation_sum / 4000000;
          }
          else if (data.donation_sum <= 10000000) {
            percent_1 = 1; percent_2 = 1;
            percent_3 = data.donation_sum / 10000000;
          }

          var bar1 = new ProgressBar.Line(donation_percent_1, {
            strokeWidth: 4,
            easing: 'easeInOut',
            duration: 800,
            color: '#1abc9c',
            trailColor: '#eee',
            trailWidth: 10,
            svgStyle: { width: '100%', height: '200%' },
            text: {
              style: {
                color: '#999',
                position: 'absolute',
                right: '0',
                top: '30px',
                padding: 0,
                margin: 0,
                transform: null
              },
              autoStyleContainer: false
            },
            from: { color: '#FFEA82' },
            to: { color: '#ED6A5A' },
            step: (state, bar1) => {
              bar1.setText(Math.round(bar1.value() * 100) + ' %&nbsp;&nbsp;&nbsp;&nbsp;STEP 1');
            }
          });

          var bar2 = new ProgressBar.Line(donation_percent_2, {
            strokeWidth: 4,
            easing: 'easeInOut',
            duration: 800,
            color: '#1abc9c',
            trailColor: '#eee',
            trailWidth: 10,
            svgStyle: { width: '100%', height: '200%' },
            text: {
              style: {
                color: '#999',
                position: 'absolute',
                right: '0',
                top: '30px',
                padding: 0,
                margin: 0,
                transform: null
              },
              autoStyleContainer: false
            },
            from: { color: '#FFEA82' },
            to: { color: '#ED6A5A' },
            step: (state, bar2) => {
              bar2.setText(Math.round(bar2.value() * 100) + ' %&nbsp;&nbsp;&nbsp;&nbsp;STEP 2');
            }
          });

          var bar3 = new ProgressBar.Line(donation_percent_3, {
            strokeWidth: 4,
            easing: 'easeInOut',
            duration: 800,
            color: '#1abc9c',
            trailColor: '#eee',
            trailWidth: 10,
            svgStyle: { width: '100%', height: '200%' },
            text: {
              style: {
                color: '#999',
                position: 'absolute',
                right: '0',
                top: '30px',
                padding: 0,
                margin: 0,
                transform: null
              },
              autoStyleContainer: false
            },
            from: { color: '#FFEA82' },
            to: { color: '#ED6A5A' },
            step: (state, bar3) => {
              bar3.setText(Math.round(bar3.value() * 100) + ' %&nbsp;&nbsp;&nbsp;&nbsp;STEP 3');
            }
          });
          bar1.animate(percent_1, function () {
            bar2.animate(percent_2, function () {
              bar3.animate(percent_3, function () {
              });
            });
          });
        }
      })
    }

    $('#mypageBtn').click(function () {
      var jwtToken = sessionStorage.getItem('jwtToken');
      if (jwtToken == null) {
        alert('로그인해주세요');
        location.replace('/login');
      }
    })
    check();
    function check() {
      var jwtToken = sessionStorage.getItem('jwtToken');
      if (jwtToken != null) { //로그인 되어있는 경우
        $('#login').css({ display: "none" });
        $('#logout').css({ display: "block" });
        $('#signup').css({ display: "none" });
        $('#a').css({ display: "none" });
      }
    }
    //로그아웃 버튼 적용 참고
    $('#logout').click(function () {
      var jwtToken = sessionStorage.getItem('jwtToken');
      if (jwtToken != null) {
        sessionStorage.removeItem('jwtToken');
        alert('로그아웃 되었습니다.')
        window.location.reload();
      }
    })




  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>


</body>

</html>